// Массив вопросов (пример с одним вопросом, добавлено свойство correctAnswer)
const questions = [
    {
      question: "Кто правил Россией и проводил реформы, направленные на модернизацию страны в начале XVIII века?",
      options: [
        "Пётр I",
        "Иван V",
        "Фёдор III",
        "Александр I"
      ],
      correctAnswer: "Пётр I"
    },
    {
      question: "Как называется комплекс реформ, проведённых Петром I для европеизации России?",
      options: [
        "Реформация",
        "Петровские реформы",
        "Просвещённые реформы",
        "Славянезация"
      ],
      correctAnswer: "Петровские реформы"
    },
    {
      question: "Какой город был основан Петром I и стал новой столицей Российской империи?",
      options: [
        "Москва",
        "Киев",
        "Санкт-Петербург",
        "Воронеж"
      ],
      correctAnswer: "Санкт-Петербург"
    },
    {
      question: "Какое море открыл для России Пётр I, расширив её торговые возможности?",
      options: [
        "Чёрное море",
        "Балтийское море",
        "Каспийское море",
        "Северное море"
      ],
      correctAnswer: "Балтийское море"
    },
    {
      question: "Как назывался флот, созданный Петром I для борьбы с шведским флотом?",
      options: [
        "Черный флот",
        "Балтийский флот",
        "Северный флот",
        "Тихоокеанский флот"
      ],
      correctAnswer: "Балтийский флот"
    },
    {
      question: "Какое сражение в ходе Великой Северной войны принесло России победу над Швецией?",
      options: [
        "Полтавская битва",
        "Бородинское сражение",
        "Куликовская битва",
        "Аустерлиц"
      ],
      correctAnswer: "Полтавская битва"
    },
    {
      question: "Какую реформу ввёл Пётр I в области управления государством, создав Сенат?",
      options: [
        "Военную реформу",
        "Административную реформу",
        "Финансовую реформу",
        "Налоговую реформу"
      ],
      correctAnswer: "Административную реформу"
    },
    {
      question: "Как называлась система образования, созданная Петром I для подготовки специалистов в различных областях?",
      options: [
        "Академия наук",
        "Училище военно-морского дела",
        "Система ремёсел",
        "Свободная школа"
      ],
      correctAnswer: "Академия наук"
    },
    {
      question: "Какое влияние оказали европейские мастера, приглашённые Петром I, на развитие России?",
      options: [
        "Помогли создать традиционные ремёсла",
        "Внедрили западные технологии и культуру",
        "Остановили развитие промышленности",
        "Укрепили феодальные устои"
      ],
      correctAnswer: "Внедрили западные технологии и культуру"
    },
    {
      question: "Как назывались реформы, направленные на модернизацию армии в России?",
      options: [
        "Артиллерийские реформы",
        "Военные реформы",
        "Кавалерийские преобразования",
        "Флотские преобразования"
      ],
      correctAnswer: "Военные реформы"
    },
    {
      question: "Кто из правителей продолжил политику европеизации и просвещения после Петра I?",
      options: [
        "Екатерина II",
        "Иван VI",
        "Николай I",
        "Александр I"
      ],
      correctAnswer: "Екатерина II"
    },
    {
      question: "Что отличало правление Екатерины II от предыдущих монархов?",
      options: [
        "Отказ от реформ",
        "Проведение реформ в правовой сфере и просветительских идей",
        "Изоляция от Запада",
        "Полное сохранение традиций"
      ],
      correctAnswer: "Проведение реформ в правовой сфере и просветительских идей"
    },
    {
      question: "Какой документ был принят Екатериной II для регулирования управления губерниями?",
      options: [
        "Губернская реформа",
        "Уложение законов",
        "Русская хартия",
        "Конституция"
      ],
      correctAnswer: "Губернская реформа"
    },
    {
      question: "Какая философская мысль оказала влияние на эпоху Просвещения в России?",
      options: [
        "Абсолютизм",
        "Меркантилизм",
        "Просвещение",
        "Феодализм"
      ],
      correctAnswer: "Просвещение"
    },
    {
      question: "Как назывался период в истории России, когда правили императрицы, включая Анну и Елизавету?",
      options: [
        "Период мужского правления",
        "Женское правление",
        "Эпоха монархического застоя",
        "Эпоха дворцовой интриги"
      ],
      correctAnswer: "Эпоха дворцовой интриги"
    },
    {
      question: "Кто правил Россией после смерти Петра I, столкнувшись с борьбой за власть?",
      options: [
        "Екатерина I",
        "Николай I",
        "Александр I",
        "Иван VI"
      ],
      correctAnswer: "Екатерина I"
    },
    {
      question: "Как называлось образование, учреждённое Петром I, которое стало важным центром иностранных знаний?",
      options: [
        "Императорская Академия наук",
        "Царская школа",
        "Дворцовая гимназия",
        "Университет Санкт-Петербурга"
      ],
      correctAnswer: "Императорская Академия наук"
    },
    {
      question: "Какой реформой Пётр I изменил внешний облик столицы России?",
      options: [
        "Реконструкция Москвы",
        "Планирование и строительство Санкт-Петербурга",
        "Модернизация Казани",
        "Переустройство Новгорода"
      ],
      correctAnswer: "Планирование и строительство Санкт-Петербурга"
    },
    {
      question: "Как звали жену Петра I, сыгравшую роль в международных союзах того времени?",
      options: [
        "Екатерина I",
        "Анна",
        "Елизавета",
        "Мария"
      ],
      correctAnswer: "Екатерина I"
    },
    {
      question: "Как называлось важное событие, результатом которого стало победоносное окончание Великой Северной войны?",
      options: [
        "Нордическая эра",
        "Вторая Северная война",
        "Полтавская битва",
        "Оренбургский поход"
      ],
      correctAnswer: "Полтавская битва"
    },
    {
      question: "Что из нижеперечисленного не относится к реформам Петра I?",
      options: [
        "Модернизация флота",
        "Европеизация армии",
        "Ужесточение крепостного права",
        "Международные торговые отношения"
      ],
      correctAnswer: "Ужесточение крепостного права"
    },
    {
      question: "Какой правитель известен своей любовью к просветительским идеям и философским трактатам?",
      options: [
        "Пётр I",
        "Екатерина II",
        "Анна Иоанновна",
        "Павел I"
      ],
      correctAnswer: "Екатерина II"
    },
    {
      question: "Какое научное учреждение активно развивалось при Екатерине II?",
      options: [
        "Российская академия наук",
        "Императорская академия художеств",
        "Академия военных наук",
        "Царская академия"
      ],
      correctAnswer: "Российская академия наук"
    },
    {
      question: "Какая внешнеполитическая задача была приоритетной для России в XVIII веке?",
      options: [
        "Изоляция от Европы",
        "Расширение территории и укрепление границ",
        "Заключение мира с Османской империей",
        "Отказ от военных действий"
      ],
      correctAnswer: "Расширение территории и укрепление границ"
    },
    {
      question: "Как называлась война, в ходе которой Россия во главе с Петром I противостояла Швеции?",
      options: [
        "Северная война",
        "Великая Отечественная война",
        "Русско-турецкая война",
        "Крымская война"
      ],
      correctAnswer: "Северная война"
    },
    {
      question: "Какую должность ввёл Пётр I для управления промышленностью и торговлей?",
      options: [
        "Министр торговли",
        "Начальник мануфактуры",
        "Комиссар по делам ремёсел",
        "Коллегия торговли"
      ],
      correctAnswer: "Коллегия торговли"
    },
    {
      question: "Какая реформа стала одним из этапов административного устройства России в XVIII веке?",
      options: [
        "Реформа губерний",
        "Крепостная реформа",
        "Военная реформа",
        "Фискальная реформа"
      ],
      correctAnswer: "Реформа губерний"
    },
    {
      question: "Какое культурное направление получило развитие в России во времена Екатерины II?",
      options: [
        "Романтизм",
        "Просвещение",
        "Импрессионизм",
        "Модернизм"
      ],
      correctAnswer: "Просвещение"
    },
    {
      question: "Как называлось законодательное собрание, созданное в конце XVIII века для обсуждения реформ?",
      options: [
        "Дума",
        "Сейм",
        "Учёный совет",
        "Народное собрание"
      ],
      correctAnswer: "Сейм"
    },
    {
      question: "Какой реформатор пытался изменить устаревшую систему управления губерниями при Екатерине II?",
      options: [
        "Григорий Потёмкин",
        "Андрей Радищев",
        "Фёдор Волков",
        "Василий Бутлеров"
      ],
      correctAnswer: "Григорий Потёмкин"
    },
    {
      question: "Какое влияние оказала западноевропейская культура на развитие России XVIII века?",
      options: [
        "Полное отрицание традиций",
        "Синтез традиций и новых взглядов",
        "Изоляция от западных идей",
        "Замедление прогресса"
      ],
      correctAnswer: "Синтез традиций и новых взглядов"
    },
    {
      question: "Кто создал первую регулярную российскую военно-морскую флотилию?",
      options: [
        "Пётр I",
        "Екатерина II",
        "Анна Иоанновна",
        "Павел I"
      ],
      correctAnswer: "Пётр I"
    },
    {
      question: "В каком городе была создана первая российская мануфактура по переработке металлов по европейским стандартам?",
      options: [
        "Смоленск",
        "Орел",
        "Нижний Новгород",
        "Санкт-Петербург"
      ],
      correctAnswer: "Санкт-Петербург"
    },
    {
      question: "Как назывался период культуры, когда Россия стала активно перенимать достижения европейского искусства?",
      options: [
        "Золотой век",
        "Эпоха барокко",
        "Эпоха классицизма",
        "Средневековье"
      ],
      correctAnswer: "Эпоха классицизма"
    },
    {
      question: "Какой аспект реформ Петра I оказал самое длительное влияние на экономику России?",
      options: [
        "Модернизация армии",
        "Развитие промышленного производства",
        "Строительство дворцов",
        "Перестройка сельского хозяйства"
      ],
      correctAnswer: "Развитие промышленного производства"
    },
    {
      question: "Какая реформа реформировала государственную службу и ввела новые должности при Екатерине II?",
      options: [
        "Сенатская реформа",
        "Кадровая реформа",
        "Оперативная реформа",
        "Административная реформа"
      ],
      correctAnswer: "Административная реформа"
    },
    {
      question: "Как назывался новый тип военной организации, созданный Петром I?",
      options: [
        "Регулярная армия",
        "Народное ополчение",
        "Феодальный взвод",
        "Дворцовой полк"
      ],
      correctAnswer: "Регулярная армия"
    },
    {
      question: "Какой внешний конфликт пришлось вести России в период правления Екатерины II?",
      options: [
        "Русско-турецкая война",
        "Отечественная война 1812 года",
        "Наполеоновские войны",
        "Крымская война"
      ],
      correctAnswer: "Русско-турецкая война"
    },
    {
      question: "Каким образом реформы Петра I повлияли на систему образования в России?",
      options: [
        "Ограничили доступ к знаниям",
        "Расширили круг лиц, получавших образование",
        "Сократили число учебных заведений",
        "Сохранение традиционных методов обучения"
      ],
      correctAnswer: "Расширили круг лиц, получавших образование"
    },
    {
      question: "Как называлось европейское устройство управления государством, которое вдохновило русских реформаторов?",
      options: [
        "Абсолютизм",
        "Конституционная монархия",
        "Парламентская система",
        "Республиканизм"
      ],
      correctAnswer: "Абсолютизм"
    },
    {
      question: "Какая реформа привела к смещению центра власти в сторону нового города Санкт-Петербурга?",
      options: [
        "Модернизация армии",
        "Административная реформа",
        "Финансовая реформа",
        "Реформа управления"
      ],
      correctAnswer: "Реформа управления"
    },
    {
      question: "Как называлась система мер по развитию промышленного производства и мануфактур, принятую Петром I?",
      options: [
        "Ленинская индустриализация",
        "Манpower система",
        "Петровская индустриализация",
        "Коллегиальная система"
      ],
      correctAnswer: "Петровская индустриализация"
    },
    {
      question: "Кто из правителей инициировал реформы в области культуры, искусства и архитектуры, способствовавшие развитию классицизма?",
      options: [
        "Анна Иоанновна",
        "Екатерина II",
        "Пётр I",
        "Екатерина I"
      ],
      correctAnswer: "Екатерина II"
    },
    {
      question: "В каком направлении реформы Петра I способствовали развитию науки в России?",
      options: [
        "Увеличение финансирования и создание академий",
        "Отмена образования",
        "Закрытие научных учреждений",
        "Ограничение иностранных учёных"
      ],
      correctAnswer: "Увеличение финансирования и создание академий"
    },
    {
      question: "Какой фактор стимулировал экономическое развитие России в XVIII веке?",
      options: [
        "Изоляция от мировой торговли",
        "Расширение внешних торговых связей",
        "Отказ от итальянских мастеров",
        "Сосредоточение на внутреннем самодостаточном производстве"
      ],
      correctAnswer: "Расширение внешних торговых связей"
    },
    {
      question: "Как называлась политика внешней экспансии России в XVIII веке?",
      options: [
        "Имперская экспансия",
        "Колониальная политика",
        "Протекционизм",
        "Интеграция"
      ],
      correctAnswer: "Имперская экспансия"
    },
    {
      question: "Какой элемент управления был реформирован для обеспечения большей эффективности государственной службы?",
      options: [
        "Дворцовая администрация",
        "Местное самоуправление",
        "Крепостное право",
        "Армейское командование"
      ],
      correctAnswer: "Дворцовая администрация"
    },
    {
      question: "Какой правитель известен проведением реформ, направленных как на внутреннее развитие, так и на внешнюю экспансию?",
      options: [
        "Пётр I",
        "Екатерина II",
        "Анна Иоанновна",
        "Николай I"
      ],
      correctAnswer: "Пётр I"
    },
    {
      question: "Каким способом реформа административной системы повысила эффективность управления в России?",
      options: [
        "Централизацией власти",
        "Передачей полномочий местным князьям",
        "Либерализацией законов",
        "Отказом от бюрократии"
      ],
      correctAnswer: "Централизацией власти"
    },
    {
      question: "Какой вклад внесли европейские специалисты в развитие российской промышленности в XVIII веке?",
      options: [
        "Полный отказ от российских традиций",
        "Внедрение новых технологий и методов",
        "Ослабление ремёсел",
        "Сохранение только традиционных навыков"
      ],
      correctAnswer: "Внедрение новых технологий и методов"
    },
    {
      question: "Кто из правителей организовал реформы, направленные на укрепление флота на Балтийском море?",
      options: [
        "Пётр I",
        "Екатерина II",
        "Анна Иоанновна",
        "Павел I"
      ],
      correctAnswer: "Пётр I"
    },
    {
      question: "Какой реформой Екатерина II пыталась улучшить правовую систему в Российской империи?",
      options: [
        "Уложением законов",
        "Военной реформой",
        "Налоговой реформой",
        "Административной реформой"
      ],
      correctAnswer: "Уложением законов"
    },
    {
      question: "Какой фактор стал одной из причин успешных реформ в России XVIII века?",
      options: [
        "Изоляция от Запада",
        "Активное заимствование европейских технологий и идей",
        "Сохранение архаичных устоев",
        "Отсутствие внешнего давления"
      ],
      correctAnswer: "Активное заимствование европейских технологий и идей"
    },
    {
      question: "Какая отрасль экономики получила значительное развитие благодаря реформам Петра I?",
      options: [
        "Сельское хозяйство",
        "Промышленное производство",
        "Ремёсла",
        "Торговля шерстью"
      ],
      correctAnswer: "Промышленное производство"
    }
  ];
  
  // Глобальные переменные
  let currentQuestionIndex = 0;
  let score = 0;
  
  // Получение элементов
  const welcomeScreen = document.getElementById("welcome-screen");
  const startGameBtn = document.getElementById("start-game");
  const quizContainer = document.getElementById("quiz-container");
  const finalScreen = document.getElementById("final-screen");
  
  const questionContainer = document.querySelector(".question-container");
  const questionElem = document.getElementById("question");
  const resultMessage = document.getElementById("result-message");
  const submitBtn = document.getElementById("submit-answer");
  const answerButtons = document.querySelectorAll(".answer-button");
  
  // Получение элементов финального экрана
  const finalScoreElem = document.getElementById("final-score");
  const finalGradeElem = document.getElementById("final-grade");
  const finalText = document.getElementById("final-text");
  const restartGameBtn = document.getElementById("restart-game");
  const rateCreatorsBtn = document.getElementById("rate-creators");
  
  // Функция показа вопроса с анимацией (fade-out затем fade-in)
  function showQuestion() {
    questionContainer.classList.remove("fade-in");
    questionContainer.classList.add("fade-out");
  
    setTimeout(() => {
      resultMessage.textContent = "";
      // Если вопросы закончились, показываем финальный экран
      if (currentQuestionIndex >= questions.length) {
        showResult();
        return;
      }
      const questionData = questions[currentQuestionIndex];
      questionElem.textContent = questionData.question;
  
      answerButtons.forEach((button, index) => {
        button.textContent = questionData.options[index];
        button.dataset.answer = questionData.options[index];
        button.classList.remove("active");
      });
  
      questionContainer.classList.remove("fade-out");
      questionContainer.classList.add("fade-in");
    }, 500);
  }
  
  // Функция для отображения сообщений
  function displayMessage(message, color) {
    resultMessage.textContent = message;
    resultMessage.style.color = color;
  }
  
  // Функция проверки ответа
  function checkAnswer(selectedAnswer) {
    const questionData = questions[currentQuestionIndex];
    if (selectedAnswer === questionData.correctAnswer) {
      displayMessage("Верно!", "green");
      score++;
      setTimeout(nextQuestion, 1000);
    } else {
      displayMessage("Неверно!", "red");
      answerButtons.forEach(btn => btn.classList.remove("active"));
    }
  }
  
  // Переход к следующему вопросу
  function nextQuestion() {
    currentQuestionIndex++;
    showQuestion();
  }
  
  // Функция вычисления итоговой оценки по баллам согласно заданным диапазонам
  function getGrade(score) {
    if (score >= 0 && score <= 10) return "1";
    else if (score >= 11 && score <= 15) return "2";
    else if (score >= 16 && score <= 25) return "3";
    else if (score >= 26 && score <= 35) return "4";
    else if (score >= 36 && score <= 45) return "5";
    else if (score >= 46 && score <= 50) return "5+";
    else return "Нет оценки";
  }
  
  // Функция отображения финального результата
  function showResult() {
    // Скрываем экран викторины
    quizContainer.classList.add("hidden");
    // Заполняем текст финального экрана
    finalScoreElem.textContent = `Ваш результат: ${score} баллов`;
    finalGradeElem.innerHTML = `Оценка: <strong>${getGrade(score)}</strong>`;
    // Показываем финальный экран с анимацией
    finalScreen.classList.remove("hidden");
    finalScreen.classList.add("fadeIn");
    // Авто-настройка размера шрифта в text area финального экрана
    adjustFinalTextFontSize();
  }
  
  // Обработка выбора ответа
  answerButtons.forEach(button => {
    button.addEventListener("click", function() {
      answerButtons.forEach(btn => btn.classList.remove("active"));
      this.classList.add("active");
    });
  });
  
  // Обработка клика по кнопке "Ответить"
  submitBtn.addEventListener("click", () => {
    const selectedButton = document.querySelector(".answer-button.active");
    if (!selectedButton) {
      displayMessage("Пожалуйста, выберите ответ!", "red");
      return;
    }
    const selectedAnswer = selectedButton.dataset.answer;
    checkAnswer(selectedAnswer);
  });
  
  // Запуск игры по клику "Начать игру!"
  startGameBtn.addEventListener("click", () => {
    // Скрываем стартовый экран
    welcomeScreen.style.display = "none";
    // Показываем экран викторины
    quizContainer.classList.remove("hidden");
    showQuestion();
  });
  
  // Обработка нажатия кнопки "Начать сначала" – перезагрузка страницы
  restartGameBtn.addEventListener("click", () => {
    location.reload();
  });
  
  // Обработка нажатия кнопки "Поставить 5 создателям" (пустая обработка)
  rateCreatorsBtn.addEventListener("click", () => {
    console.log("Спасибо за высокую оценку создателям!");
  });
  
  // Функция для авто-подгонки размера шрифта в текстовом поле финального экрана
  function adjustFinalTextFontSize() {
    // Получаем ширину финального экрана
    const containerWidth = finalScreen.clientWidth;
    // Задаём размер шрифта относительно ширины контейнера (минимум 14px)
    const newFontSize = Math.max(14, containerWidth * 0.03);
    finalText.style.fontSize = newFontSize + "px";
  }
  
  // При изменении окна обновляем размер шрифта, если финальный экран открыт
  window.addEventListener("resize", () => {
    if (!finalScreen.classList.contains("hidden")) {
      adjustFinalTextFontSize();
    }
  });
  